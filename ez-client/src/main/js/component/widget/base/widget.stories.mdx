import {Anchor, Props, Meta, Preview, Story} from "@storybook/addon-docs/blocks";
import {array, object, text, number, select, withKnobs} from "@storybook/addon-knobs";
import {linkTo} from '@storybook/addon-links';
import {jsxDecorator} from 'storybook-addon-jsx';

import Widget from "./widget";
import WidgetHeader from "./widget-header";
import WidgetContent from "./widget-content";

<Meta 
  title="Components|Widget/base/Widget"
  component={Widget}
  parameters={{
    githubLink: "/blob/master/ez-client/src/main/js/component/widget/base/widget.jsx",
    sortPriority: -100
  }}
/>

<Anchor storyId="components-widget-widget--default-story" />

# Widget

This is a the common Widget component. All Widget are composed with it.

## Props

All Widgets inherit from these properties.

<Props of={Widget} />

## Usage

### Default

A default Widget, with a header and paragraph as content.

<Preview>
  <Story
    decorators={[withKnobs, jsxDecorator]}
    name="default"
  >
    <Widget>
      <WidgetHeader title="Widget Header"/>
      <WidgetContent>
        <span>Text content</span>
      </WidgetContent>
    </Widget>
  </Story>
</Preview>

### Loading

A loading widget, waiting all dataSources are loaded.

<Preview>
  <Story
    decorators={[withKnobs, jsxDecorator]}
    name="loading"
    parameters={{
      info: ""
    }}
  >
    <Widget dataSources={[{loaded: false}]}>
      <WidgetHeader title="Widget Header"/>
      <WidgetContent>
        <span>Text content</span>
      </WidgetContent>
    </Widget>
  </Story>
</Preview>

### Widget without header

<Preview>
  <Story
    decorators={[withKnobs, jsxDecorator]}
    name="noheader"    
  >
    <Widget>
      <WidgetContent>
        <span>Only a text content</span>
      </WidgetContent>
    </Widget>
  </Story>
</Preview>

### Editable widget

<Preview>
  <Story
    decorators={[withKnobs, jsxDecorator]}
    name="editable"    
    parameters={{
      info:
        "When editable, an icon appears on top right widget corner. <br/>" +
        "Widgets are not editable by default.",
    }}
  >
    <Widget
      editable={true}
      editModal={() => console.log("Open edit modal windows")}
    >
      <WidgetHeader title="Editable widget"/>
      <WidgetContent>
        <span>Look at the top right corner</span>
      </WidgetContent>
    </Widget>
  </Story>
</Preview>

### Widget with list layout

<Preview>
  <Story
    decorators={[withKnobs, jsxDecorator]}
    name="list-layout"    
    parameters={{
      info: "List layout widget"
    }}
  >
    <Widget
    >
      <WidgetHeader title="List widget"/>
      <WidgetContent layout="list">
        <span>item 1</span>
        <span>item 2</span>
      </WidgetContent>
    </Widget>
  </Story>
</Preview>


### Widget with threshold configured

<Preview>
  <Story
    decorators={[withKnobs, jsxDecorator]}
    name="thresholds"    
    parameters={{
      info: ""
    }}
  >
    <Widget
      thresholds={{
        good: 100,
        avg: 50,
        bad: 0
      }}
    >
      <WidgetHeader title="Widget with thresholds"/>
      <WidgetContent layout="list">
        <span>100</span>
        <span>80</span>
        <span>60</span>
        <span>40</span>
        <span>20</span>
        <span>0</span>
      </WidgetContent>
    </Widget>
  </Story>
</Preview>

<Story 
    decorators={[withKnobs, jsxDecorator]}
    name="knobs"
    parameters={{
      docs: {
        disable: true        
      }
    }}
  >
    <Widget
      id={text("id", "sampleId")}
      key={text("key", "sampleId")}
      title={text("title", "Play with me (Canvas tab)")}
      loader={text("loader", "<p>Widget loading...</p>")}
    >
      <WidgetHeader title="Knobs Widget"/>
      <WidgetContent>
        <span>Simple text</span>
      </WidgetContent>
    </Widget>
</Story>

